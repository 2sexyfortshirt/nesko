


<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–µ–¥–∏–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
:root{
  --bg-1:#09030a; --bg-2:#120021; --accent-1:#c400ff; --accent-2:#00ffe7;
  --glass: rgba(255,255,255,0.06); --muted: rgba(255,255,255,0.65);
}
*{box-sizing:border-box}
html,body{margin:0;padding:32px;min-height:100%;font-family:'Poppins',sans-serif;color:#f4f4f6;background:linear-gradient(180deg,var(--bg-1),var(--bg-2))}
header{text-align:center;margin-bottom:28px}
h1{font-family:'Playfair Display', serif;font-size:48px;margin:0 0 8px;color:#fff}
.search input{padding:12px 16px;border-radius:12px;border:none;background:rgba(255,255,255,0.02);color:#fff;width:300px}
.search button{padding:12px 18px;border-radius:12px;border:none;background:linear-gradient(135deg,var(--accent-1),#7a00ff);color:#fff;font-weight:700;cursor:pointer}

.category{margin-bottom:40px}
.category h2{color:#fff;font-size:24px;margin-bottom:16px;border-bottom:1px solid rgba(255,255,255,0.1);padding-bottom:4px}
.audio-list, .video-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
.card{background:var(--glass);border:1px solid rgba(255,255,255,0.04);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:8px;backdrop-filter:blur(6px)}
.card img{width:100%;height:120px;object-fit:cover;border-radius:10px}
.card .artist{font-weight:600;font-size:16px;color: #f0f0f0;
}
.card .filename{font-size:14px;color:var(--muted)}
.card .genre{font-size:13px;color:#bff7ee;margin-top:4px;background:rgba(255,255,255,0.03);padding:4px 6px;border-radius:999px;display:inline-block}
.card button{padding:8px 12px;border:none;border-radius:10px;cursor:pointer;font-weight:600;color:#fff;margin-top:auto}
.play-btn{background:linear-gradient(135deg,var(--accent-1),#7a00ff)}
.buy-btn{background:linear-gradient(135deg,var(--accent-2),#0088ff)}
.video-card video{width:100%;border-radius:12px;display:block}

.particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
.particles span{position:absolute;width:3px;height:3px;border-radius:50%;background:rgba(255,255,255,0.6);animation:twinkle infinite ease-in-out}
@keyframes twinkle{0%,100%{opacity:0.2}50%{opacity:1}}

.modal{position:fixed;top:0;left:0;width:100%;height:100%;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,0.6);z-index:2000}
.modal .panel{background:linear-gradient(180deg,#190021,#120014);padding:20px;border-radius:14px;color:#fff;min-width:300px;text-align:center;border:1px solid rgba(196,0,255,0.12)}
.modal .panel a.download{display:inline-block;margin-top:12px;padding:10px 16px;background:linear-gradient(135deg,#00ffe7,#00a0ff);color:#001018;border-radius:10px;font-weight:700}
/* ===== –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (—Ç—É—Ä–µ—Ü–∫–∏–π) ===== */
.legal-modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(6px);display:none;justify-content:center;align-items:center;z-index:5000}
.legal-content{width:90%;max-width:720px;background:linear-gradient(180deg,#1b0022,#0c0013);border:1px solid rgba(255,255,255,0.12);border-radius:16px;padding:28px;color:#fff;max-height:80vh;overflow-y:auto}
.legal-content h2{margin-top:0;margin-bottom:14px}
.legal-close{margin-top:18px;background:#fff;color:#111;padding:10px 16px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
footer {
  margin-top: 60px;
  text-align: center;
  color: #bdbdbd;
  font-size: 15px;
  padding: 30px 0;

}

footer a {
  color: #eaeaea;
  margin: 0 14px;
  cursor: pointer;
  text-decoration: none;
  font-weight: 500;
  letter-spacing: 0.4px;
  font-family: "Inter", "Roboto", "Segoe UI", sans-serif;
  font-weight: 500;
  font-size: 15px;
  letter-spacing: 0.3px;
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  /* –∏–Ω–Ω–æ–≤–∞—Ü–∏—è ‚Üì */
  padding: 6px 10px;
  border-radius: 12px;
  transition: 0.25s ease;
  background: rgba(255, 255, 255, 0.02);
  backdrop-filter: blur(6px);
}

footer a:hover {
  background: rgba(255, 255, 255, 0.12);
  color: #fff;
  transform: translateY(-2px);
}

footer .footer-brand {
  margin-top: 22px;
  display: flex;
  justify-content: center;
  gap: 18px;
  align-items: center;
  opacity: 0.85;
}

.glass-btn {
  width: 100%;
  padding: 14px 20px;
  font-size: 17px;
  font-weight: 600;
  border-radius: 18px;

  /* —Å—Ç–µ–∫–ª–æ */
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  /* –≥—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–µ–∫–ª–∞ */
  border: 1px solid rgba(255, 255, 255, 0.25);

  /* –º—è–≥–∫–∞—è –Ω–µ–æ–Ω–æ–≤–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ */
  box-shadow:
      0 8px 32px rgba(0,0,0,0.35),
      inset 0 0 15px rgba(255,255,255,0.08);

  color: #fff;
  letter-spacing: 0.4px;

  cursor: pointer;
  transition: 0.25s ease;
  text-transform: uppercase;

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;

  user-select: none;
}

.glass-btn:hover {
  background: rgba(255, 255, 255, 0.18);
  backdrop-filter: blur(16px);

  box-shadow:
      0 12px 40px rgba(0,0,0,0.45),
      inset 0 0 20px rgba(255,255,255,0.12);

  transform: translateY(-2px);
}

.glass-btn:active {
  transform: scale(0.96);
  backdrop-filter: blur(20px);
  background: rgba(255, 255, 255, 0.22);
  box-shadow:
      0 6px 20px rgba(0,0,0,0.35),
      inset 0 0 28px rgba(255,255,255,0.2);
}





.country-selector {
  display: flex;
  flex-wrap: nowrap;                    /* –ù–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –∫–Ω–æ–ø–∫–∏ */
  overflow-x: auto;                     /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª */
  gap: 8px;                             /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
  padding: 8px;
  -webkit-overflow-scrolling: touch;    /* –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –Ω–∞ iOS */
  scrollbar-width: thin;                /* –£–∑–∫–∏–π —Å–∫—Ä–æ–ª–ª –¥–ª—è Firefox */
  scrollbar-color: rgba(0,0,0,0.3) transparent;
}

.country-selector::-webkit-scrollbar {
  height: 6px;
}

.country-selector::-webkit-scrollbar-track {
  background: transparent;
}

.country-selector::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,0.3);
  border-radius: 3px;
}
.country-open-btn {
  width: 100%;
  padding: 14px 22px;
  border-radius: 14px;
  font-size: 17px;
  font-weight: 600;
  letter-spacing: 0.3px;

  background: linear-gradient(135deg, #2a2a2a, #000000);
  color: #ffffff;

  border: 1px solid #3d3d3d;
  box-shadow: inset 0 0 20px rgba(255,255,255,0.03),
              0 6px 18px rgba(0,0,0,0.45);

  cursor: pointer;
  transition: 0.25s ease;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;

  text-transform: uppercase;
  user-select: none;
}

.country-open-btn:hover {
  background: linear-gradient(135deg, #383838, #0c0c0c);
  transform: translateY(-2px);
  box-shadow: inset 0 0 22px rgba(255,255,255,0.05),
              0 10px 24px rgba(0,0,0,0.55);
}

.country-open-btn:active {
  transform: scale(0.96);
  box-shadow: inset 0 0 30px rgba(255,255,255,0.1),
              0 4px 10px rgba(0,0,0,0.4);
}

.country-open-btn::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.01));
  pointer-events: none;
}


.country-btn {
  display: flex;
  align-items: center;
  gap: 6px;               /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ñ–ª–∞–≥–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º */
  flex: 0 0 auto;         /* –ö–Ω–æ–ø–∫–∞ –Ω–µ —Å–∂–∏–º–∞–µ—Ç—Å—è */
  padding: 6px 14px;
  border: none;
  border-radius: 12px;
  background-color: #222;
  color: white;
  font-size: 14px;
  cursor: pointer;
  white-space: nowrap;    /* –¢–µ–∫—Å—Ç –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è */
  transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.country-btn img {
  width: 24px;
  height: 24px;
  object-fit: cover;
  border-radius: 50%;     /* –ö—Ä—É–≥–ª—ã–π —Ñ–ª–∞–≥ */
  border: 1px solid #fff;
}

.country-btn:hover {
  background-color: #444;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.4);
}
.no-results {
    margin: 20px;
    padding: 15px;
    background: #222;
    color: #fff;
    font-size: 18px;
    border-radius: 10px;
    text-align: center;
}


/* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (max-width: 768px) {
  .country-btn {
    font-size: 12px;
    padding: 4px 10px;
  }


.search {
    flex-direction: column;  /* –∫–Ω–æ–ø–∫–∞ –ø–æ–¥ –∏–Ω–ø—É—Ç–æ–º */
    align-items: center;     /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º */
    gap: 12px;               /* –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∏–Ω–ø—É—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π */
  }

  .search input {
    width: 80%;       /* —É–º–µ–Ω—å—à–∞–µ–º —à–∏—Ä–∏–Ω—É –∏–Ω–ø—É—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    max-width: 300px;
  }

  .search button {
    width: 50%;       /* –∫–Ω–æ–ø–∫–∞ –ø–æ–¥ –∏–Ω–ø—É—Ç–æ–º */
    max-width: 300px;

    margin-top: 20px;
  }

  .country-btn img {
    width: 20px;
    height: 20px;
  }
   footer {
    padding: 25px 10px;
    font-size: 13px;
  }

  footer a {
    display: block;
    margin: 8px 0;
    font-size: 14px;
  }

  footer .footer-logo {
    margin-top: 20px;
  }

  footer img {
    height: 26px !important;
  }
  .title-main {
  font-size: 40px;
  font-weight: 800;
  letter-spacing: 2px;
  text-align: center;
  color: #fff;
}

.title-arc {
  font-size: 20px;
  font-weight: 600;
  text-align: center;
  color: #f2f2f2;

  display: inline-block;
  margin-top: -10px;
  transform: translateY(6px); /* —á—É—Ç—å –Ω–∏–∂–µ */
  letter-spacing: 6px;

  /* –ò–ú–ò–¢–ê–¶–ò–Ø –ò–ó–ì–ò–ë–ê */
  transform-origin: center top;
  transform: translateY(6px) rotateX(25deg);
  opacity: 0.9;
}


/* –ú–æ–¥–∞–ª–∫–∞: —Å—Ç–∏–ª—å –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω—ã */
.choose-country-btn {
  background: #141414;
  border: 1px solid #242424;
  padding: 12px;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  color: #fff;
  font-size: 14px;
  transition: transform .18s ease, background .18s ease, border-color .18s ease;
}

.choose-country-btn img {
  width: 56px;
  height: auto;
  border-radius: 6px;
  object-fit: cover;
}

.choose-country-btn span {
  display: block;
  margin-top: 4px;
  font-weight: 600;
  letter-spacing: 0.2px;
}

/* Hover/active */
.choose-country-btn:hover {
  background: #1d1d1d;
  transform: translateY(-4px);
  border-color: #3a3a3a;
}
.choose-country-btn:active {
  transform: scale(0.98);
}

.progress-container {
  width: 100%;
  height: 6px;
  background: #ccc;
  border-radius: 3px;
  margin-top: 5px;
  cursor: pointer;
}
.progress-bar {
  width: 0%;
  height: 100%;
  background: #4caf50;
  border-radius: 3px;
}

.equalizer {
  display: block;
  margin-top: 8px;
  background: #000;
}


/* –ú–µ–ª–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
@media (max-width: 576px) {
  .choose-country-btn img { width: 48px; }
  .choose-country-btn { padding: 10px; font-size: 13px; border-radius: 8px; }
}



}



</style>

</head>
<body>

<header>
  <h1 class="title-main"> NEPIANO.NET</h1>
  <h2 class="title-arc">COVERS</h2>
  <form class="search" method="get" action="/">
    <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫..." value="{{ query }}">
    <button type="submit" >üîç</button>
  </form>
  {% if no_results %}
<div class="no-results">
  –ü–æ –∑–∞–ø—Ä–æ—Å—É ¬´{{ query }}¬ª –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
</div>
{% endif %}

</header>

<!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏ Bootstrap -->
<div class="mb-3">
  <button class="glass-btn" data-bs-toggle="modal" data-bs-target="#countryModal">
    üåç –í—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞–Ω—É
  </button>
</div>

<!-- Country Modal (Bootstrap) -->
<div class="modal fade" id="countryModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" style="background:#0e0e0e; color:white; border-radius:12px;">

      <div class="modal-header border-0">
        <h5 class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <div class="row g-2">
          {% for category in categories %}
          <div class="col-6 col-md-3">
            <button type="button"
                    class="choose-country-btn w-100"
                    data-target="{{ category.name|lower }}"
                    data-bs-dismiss="modal"
                    aria-label="–í—ã–±—Ä–∞—Ç—å {{ category.name }} {{category.id}}">
              <img src="https://flagcdn.com/48x36/{{ country_code[category.name]|lower }}.png" alt="{{ category.name }} flag">
              <span>{{ category.name }}</span>
            </button>
          </div>
          {% endfor %}
        </div>
      </div>

    </div>
  </div>
</div>

<main>
  {% for category in categories %}


  <section class="category" data-country="{{ category.name|lower }}" style="display:none;">
    <h2>{{ category.name }}</h2>

 <!-- –ê–£–î–ò–û -->
    {% if category.audios %}
    <div class="audio-list">
      {% for a in category.audios %}
      <div class="card" data-filename="{{ a.original_name if a.original_name else a.filename }}">
        {% if a.thumb_url %}
        <img src="{{ a.thumb_url }}" alt="{{ a.filename }}">
        {% endif %}
        <div class="artist">{{ a.artist or 'Unknown' }}</div>
        <div class="filename">{{ a.original_name or a.filename }}</div>
        {% if a.genre %}
        <div class="genre">{{ a.genre }}</div>
        {% endif %}
        <audio src="{{ a.url }}" preload="metadata" class="audio-player"></audio>

         <div class="controls">
    <button class="play-btn">‚ñ∂ Play</button>
    <div class="time-display">00:00 / 00:00</div>
  </div>
  <div class="progress-container">
    <div class="progress-bar"></div>
  </div>
  <canvas class="equalizer" width="200" height="40"></canvas>
           <button class="buy-btn" data-filename="{{ a.filename }}">
          üí≥ –ö—É–ø–∏—Ç—å ${{ (a.price/100)|round(2) }}
        </button>
</div>







      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- –í–ò–î–ï–û -->
    {% if category.videos %}
    <div class="video-list" style="margin-top:20px;">
      {% for v in category.videos %}
      <div class="card video-card" data-filename="{{ v.original_name or v.filename }}">
        <video src="{{ v.url }}" controls></video>
        <div class="filename">{{ v.original_name or v.filename }}</div>
        {% if v.title %}
        <div class="artist">{{ v.title }}</div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% endif %}

  </section>
  {% endfor %}
</main>
<!-- –§—É—Ç–µ—Ä -->
<footer>
  <a onclick="openLegal('about')">Hakkƒ±mƒ±zda</a>
  <a onclick="openLegal('delivery')">Teslimat ve ƒ∞ade</a>
  <a onclick="openLegal('privacy')">Gizlilik S√∂zle≈ümesi</a>
  <a onclick="openLegal('distance')">Mesafeli Satƒ±≈ü</a>

  <div class="footer-brand">
   <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png"
       alt="Visa" height="24">

  <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg"
       alt="MasterCard" height="24">

    <img src="https://raw.githubusercontent.com/ozgurrturk/troy-logo/master/troy-logo.png"
     alt="Troy" height="24">


  </div>
</footer>

<!-- Legal Modals -->



<div id="legal-{{ type }}" class="legal-modal">
  <div class="legal-content">
    <h2>{{ title }}</h2>
    <p>{{ content }}</p>
    <button class="legal-close" onclick="closeLegal('{{ type }}')">Kapat</button>
  </div>
</div>
<div id="legal-delivery" class="legal-modal">
  <div class="legal-content">
    <p>place for something </p>
    <button class="legal-close" onclick="closeLegal('delivery')">Kapat</button>
  </div>
</div>

<div id="legal-privacy" class="legal-modal">
  <div class="legal-content">
        <p>place for something </p>



    <button class="legal-close" onclick="closeLegal('privacy')">Kapat</button>
  </div>
</div>
<!-- footer modal -->
<div id="legal-distance" class="legal-modal">
  <div class="legal-content">

        <p>place for something </p>

      <a href="mailto:mozjfima@gmail.com">mozjfima@gmail.com</a> /
      <a href="mailto:nesko168@icloud.com">nesko168@icloud.com</a>
    </p>
    <button class="legal-close" onclick="closeLegal('distance')">Kapat</button>
  </div>
</div>

<div class="particles"></div>

<!-- Buy Modal -->

<div id="buy-modal" class="modal">
  <div class="panel">
    <div id="modal-message">‚úÖ –û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∞!</div>
    <a id="download-link" class="download" href="#">–°–∫–∞—á–∞—Ç—å</a>
    <div style="margin-top:14px">
      <button onclick="closeModal()" style="padding:8px 12px;border-radius:8px;border:none;background:#fff;color:#111;font-weight:700">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>


<!-- footer modal -->
<div id="legal-about" class="legal-modal">
  <div class="legal-content">


    <button class="legal-close" onclick="closeLegal('about')">Kapat</button>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ------------------------------
   –§–ò–õ–¨–¢–† –ö–ê–¢–ï–ì–û–†–ò–ô (—Å—Ç—Ä–∞–Ω—ã)
   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
--------------------------------*/
document.addEventListener("DOMContentLoaded", () => {
  const cats = document.querySelectorAll(".category");
  const chooseBtns = document.querySelectorAll(".choose-country-btn");

  function showCategory(target) {
    cats.forEach(cat => {
      if (!target) {
        cat.style.display = "";
      } else if (cat.dataset.country === target) {
        cat.style.display = "block";
      } else {
        cat.style.display = "none";
      }
    });

    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  chooseBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.dataset.target;
      showCategory(target);
    });
  });
});
</script>

<script>
/* ------------------------------
   –ß–ê–°–¢–ò–¶–´ –ù–ê –§–û–ù–ï
   –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 40 –º–∞–ª–µ–Ω—å–∫–∏—Ö —Å–≤–µ—Ç—è—â–∏—Ö—Å—è —Ç–æ—á–µ–∫
--------------------------------*/
const particlesContainer = document.querySelector('.particles');

for (let i = 0; i < 40; i++) {
  const span = document.createElement('span');
  span.style.top = (Math.random() * 100) + '%';
  span.style.left = (Math.random() * 100) + '%';
  span.style.width = span.style.height = (2 + Math.random() * 3) + 'px';
  span.style.animationDuration = (3 + Math.random() * 5) + 's';
  particlesContainer.appendChild(span);
}
</script>
  <script>
/* ------------------------------
   –ê–£–î–ò–û-–ü–õ–ï–ï–†–´
   - Play / Pause
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ/–æ–±—â–∏–µ —Å–µ–∫—É–Ω–¥—ã
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ —Ç—Ä–µ–∫–∏
--------------------------------*/

function formatTime(sec) {
  if (isNaN(sec)) return "00:00";
  const m = Math.floor(sec / 60).toString().padStart(2, '0');
  const s = Math.floor(sec % 60).toString().padStart(2, '0');
  return `${m}:${s}`;
}

document.querySelectorAll('.card').forEach(card => {
  const audio = card.querySelector('audio');
   if (!audio) return;
  const playBtn = card.querySelector('.play-btn');

  // –ë–ª–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
  const timeDisplay = document.createElement('div');
  timeDisplay.className = 'time-display';
  timeDisplay.textContent = '00:00 / 00:00';
  card.appendChild(timeDisplay);

  audio.addEventListener('loadedmetadata', () => {
    timeDisplay.textContent = `00:00 / ${formatTime(audio.duration)}`;
  });

  audio.addEventListener('timeupdate', () => {
    timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
  });

  playBtn.addEventListener('click', () => {
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞—É–¥–∏–æ
    document.querySelectorAll('audio').forEach(a => {
      if (a !== audio) {
        a.pause();
        const otherBtn = a.closest('.card').querySelector('.play-btn');
        if (otherBtn) otherBtn.textContent = '‚ñ∂ Play';
      }
    });

    if (audio.paused) {
      audio.play().catch(err => console.log("Play error:", err));
      playBtn.textContent = '‚è∏ Pause';
    } else {
      audio.pause();
      playBtn.textContent = '‚ñ∂ Play';
    }
  });
});


</script>


<script>
/* ------------------------------
   BUY MODAL
   –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
   –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
--------------------------------*/
document.querySelectorAll('.buy-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const filename = btn.dataset.filename;
    document.getElementById('download-link').href = '/stream/' + filename;
    document.getElementById('buy-modal').style.display = 'flex';
  });
});
</script>


<script>
function closeModal(){ document.getElementById('buy-modal').style.display='none'; }
function openLegal(type){ document.getElementById('legal-'+type).style.display='flex'; }
function closeLegal(type){ document.getElementById('legal-'+type).style.display='none'; }

</script>

</body>
</html>

