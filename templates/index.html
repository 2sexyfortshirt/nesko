<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ĞœĞµĞ´Ğ¸Ğ° Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
<style>
:root{
  --bg-1:#09030a; --bg-2:#120021; --accent-1:#c400ff; --accent-2:#00ffe7;
  --glass: rgba(255,255,255,0.06); --muted: rgba(255,255,255,0.65);
}
*{box-sizing:border-box}
html,body{margin:0;padding:32px;min-height:100%;font-family:'Poppins',sans-serif;color:#f4f4f6;background:linear-gradient(180deg,var(--bg-1),var(--bg-2))}
header{text-align:center;margin-bottom:28px}
h1{font-family:'Playfair Display', serif;font-size:48px;margin:0 0 8px;color:#fff}
.search input{padding:12px 16px;border-radius:12px;border:none;background:rgba(255,255,255,0.02);color:#fff;width:300px}
.search button{padding:12px 18px;border-radius:12px;border:none;background:linear-gradient(135deg,var(--accent-1),#7a00ff);color:#fff;font-weight:700;cursor:pointer}

.category{margin-bottom:40px}
.category h2{color:#fff;font-size:24px;margin-bottom:16px;border-bottom:1px solid rgba(255,255,255,0.1);padding-bottom:4px}
.audio-list, .video-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
.card{background:var(--glass);border:1px solid rgba(255,255,255,0.04);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:8px;backdrop-filter:blur(6px)}
.card img{width:100%;height:120px;object-fit:cover;border-radius:10px}
.card .artist{font-weight:600;font-size:16px}
.card .filename{font-size:14px;color:var(--muted)}
.card .genre{font-size:13px;color:#bff7ee;margin-top:4px;background:rgba(255,255,255,0.03);padding:4px 6px;border-radius:999px;display:inline-block}
.card button{padding:8px 12px;border:none;border-radius:10px;cursor:pointer;font-weight:600;color:#fff;margin-top:auto}
.play-btn{background:linear-gradient(135deg,var(--accent-1),#7a00ff)}
.buy-btn{background:linear-gradient(135deg,var(--accent-2),#0088ff)}
.video-card video{width:100%;border-radius:12px;display:block}

.particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
.particles span{position:absolute;width:3px;height:3px;border-radius:50%;background:rgba(255,255,255,0.6);animation:twinkle infinite ease-in-out}
@keyframes twinkle{0%,100%{opacity:0.2}50%{opacity:1}}

.modal{position:fixed;top:0;left:0;width:100%;height:100%;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,0.6);z-index:2000}
.modal .panel{background:linear-gradient(180deg,#190021,#120014);padding:20px;border-radius:14px;color:#fff;min-width:300px;text-align:center;border:1px solid rgba(196,0,255,0.12)}
.modal .panel a.download{display:inline-block;margin-top:12px;padding:10px 16px;background:linear-gradient(135deg,#00ffe7,#00a0ff);color:#001018;border-radius:10px;font-weight:700}
/* ===== ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾ĞºĞ½Ğ° ÑÑ€Ğ¸Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† (Ñ‚ÑƒÑ€ĞµÑ†ĞºĞ¸Ğ¹) ===== */
.legal-modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(6px);display:none;justify-content:center;align-items:center;z-index:5000}
.legal-content{width:90%;max-width:720px;background:linear-gradient(180deg,#1b0022,#0c0013);border:1px solid rgba(255,255,255,0.12);border-radius:16px;padding:28px;color:#fff;max-height:80vh;overflow-y:auto}
.legal-content h2{margin-top:0;margin-bottom:14px}
.legal-close{margin-top:18px;background:#fff;color:#111;padding:10px 16px;border-radius:10px;border:none;font-weight:700;cursor:pointer}




footer{margin-top:60px;text-align:center;color:var(--muted);font-size:14px}
footer a{color:#fff;margin:0 10px;cursor:pointer;text-decoration:underline}


</style>
</head>
<body>

<header>
  <h1>NEPIANO.NET</h1>
  <form class="search" method="get" action="/">
    <input type="text" name="q" placeholder="ĞŸĞ¾Ğ¸ÑĞº..." value="{{ query }}">
    <button type="submit">ğŸ”</button>
  </form>
</header>

<main>
  {% for category in categories %}
  <section class="category">
    <h2>{{ category.name }}</h2>

    {% if category.audios %}
    <div class="audio-list">
      {% for a in category.audios %}
      <div class="card" data-filename="{{ a.filename }}">
        {% if a.thumb_url %}
        <img src="{{ a.thumb_url }}" alt="{{ a.filename }}">
        {% endif %}
        <div class="artist">{{ a.artist }}</div>
        <div class="filename">{{ a.filename }}</div>
        {% if a.genre %}
        <div class="genre">{{ a.genre }}</div>
        {% endif %}
        <audio src="{{ a.url }}" preload="metadata" class="audio-player"></audio>
        <button class="play-btn">â–¶ Play</button>
        <button class="buy-btn" data-filename="{{ a.filename }}">ğŸ’³ ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ ${{ (a.price/100)|round(2) }}</button>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    {% if category.videos %}
    <div class="video-list" style="margin-top:20px;">
      {% for v in category.videos %}
      <div class="card video-card">
        <video src="{{ v.url }}" controls></video>
        <div class="filename">{{ v.filename }}</div>
        {% if v.title %}<div class="artist">{{ v.title }}</div>{% endif %}
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </section>
  {% endfor %}
</main>

<!-- ===== Ğ¤ÑƒÑ‚ĞµÑ€ Ñ Ğ¼Ğ¾Ğ´Ğ°Ğ»ĞºĞ°Ğ¼Ğ¸ Ğ¸ Ğ»Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿Ğ°Ğ¼Ğ¸ ===== -->
<footer>
  <a onclick="openLegal('about')">HakkÄ±mÄ±zda</a>
  <a onclick="openLegal('delivery')">Teslimat ve Ä°ade</a>
  <a onclick="openLegal('privacy')">Gizlilik SÃ¶zleÅŸmesi</a>
  <a onclick="openLegal('distance')">Mesafeli SatÄ±ÅŸ</a>

  <!-- Payment Logos -->
  <div style="margin-top: 18px; display: flex; justify-content: center; gap: 18px; align-items: center; opacity: 0.85;">

<img src="{{ url_for('static', filename='logo_band_colored@1X.png') }}" alt="iyzico" style="height:28px;">

  </div>
</footer>

<div id="legal-about" class="legal-modal">
  <div class="legal-content">
    <h2>HakkÄ±mÄ±zda</h2>
    <p>BaÄŸÄ±msÄ±z bir mÃ¼zik yapÄ±mcÄ±sÄ± ve besteciyim. Bu web sitesi Ã¼zerinden Ã¶zgÃ¼n mÃ¼zik Ã§alÄ±ÅŸmalarÄ±mÄ± dijital formatta satÄ±n alabilirsiniz.</p>
    <p>HazÄ±rladÄ±ÄŸÄ±m mÃ¼zikler; video iÃ§erikleri, oyunlar, reklamlar, sosyal medya projeleri ve kiÅŸisel kullanÄ±m iÃ§in uygundur (seÃ§ilen lisansa baÄŸlÄ± olarak).</p>
    <p>AmacÄ±m, projelerinize profesyonel bir ses tasarÄ±mÄ± ve kaliteli mÃ¼zik desteÄŸi saÄŸlamaktÄ±r. Bu site Ã¼zerinden yapÄ±lan tÃ¼m satÄ±ÅŸlar dijital Ã¼rÃ¼n kapsamÄ±ndadÄ±r.</p>
    <button class="legal-close" onclick="closeLegal('about')">Kapat</button>
  </div>
</div>
<div id="legal-delivery" class="legal-modal">
  <div class="legal-content">
    <h2>Teslimat ve Ä°ade ÅartlarÄ±</h2>
    <p><b>Dijital ÃœrÃ¼n TeslimatÄ±</b><br>â€“ Ã–deme baÅŸarÄ±yla tamamlandÄ±ktan sonra Ã¼rÃ¼nÃ¼n indirme baÄŸlantÄ±sÄ± otomatik olarak e-posta adresinize gÃ¶nderilir.<br>â€“ ÃœrÃ¼n tamamen dijital olarak teslim edilir, fiziksel bir gÃ¶nderim yoktur.</p>
    <p><b>Ä°ade KoÅŸullarÄ±</b><br>â€“ Dijital Ã¼rÃ¼nlerde indirme baÄŸlantÄ±sÄ± saÄŸlandÄ±ktan sonra iade yapÄ±lamaz.<br>â€“ Dosya bozuk veya indirilemez durumda ise bizimle iletiÅŸime geÃ§ebilirsiniz. Yeni indirme baÄŸlantÄ±sÄ± Ã¼cretsiz olarak saÄŸlanÄ±r.</p>
    <button class="legal-close" onclick="closeLegal('delivery')">Kapat</button>
  </div>
</div>
<div id="legal-privacy" class="legal-modal">
  <div class="legal-content">
    <h2>Gizlilik SÃ¶zleÅŸmesi</h2>
    <p><b>Toplanan Bilgiler:</b><br>â€“ E-posta adresi<br>â€“ Ä°sim (gerektiÄŸinde)<br>â€“ Ã–deme bilgileri (iyzico tarafÄ±ndan iÅŸlenir, tarafÄ±mÄ±zda saklanmaz)</p>
    <p><b>Bilgilerin KullanÄ±m AmaÃ§larÄ±:</b><br>â€“ Dijital Ã¼rÃ¼nÃ¼n teslim edilmesi<br>â€“ SatÄ±n alma onayÄ± ve bilgilendirme<br>â€“ Teknik destek saÄŸlanmasÄ±</p>
    <p>KiÅŸisel verileriniz Ã¼Ã§Ã¼ncÃ¼ kiÅŸilerle paylaÅŸÄ±lmaz. Ã–deme iÅŸlemleri iyzico tarafÄ±ndan gÃ¼venli ÅŸekilde iÅŸlenir.</p>
    <button class="legal-close" onclick="closeLegal('privacy')">Kapat</button>
  </div>
</div>
<div id="legal-distance" class="legal-modal">
  <div class="legal-content">
    <h2>Mesafeli SatÄ±ÅŸ SÃ¶zleÅŸmesi</h2>
    <p><b>ÃœrÃ¼n TÃ¼rÃ¼:</b> Dijital mÃ¼zik iÃ§eriÄŸi (MP3 / WAV).</p>
    <p><b>Hizmetin Ä°fasÄ±:</b><br>Ã–deme tamamlandÄ±ktan sonra dijital Ã¼rÃ¼nÃ¼n indirme baÄŸlantÄ±sÄ± e-posta ile gÃ¶nderilir. Bu aÅŸamada hizmet tamamen ifa edilmiÅŸ sayÄ±lÄ±r.</p>
    <p><b>Cayma HakkÄ±:</b><br>6502 sayÄ±lÄ± kanun gereÄŸince, dijital iÃ§erik sunulan hizmetlerde; tÃ¼ketici Ã¼rÃ¼nÃ¼ teslim aldÄ±ktan sonra cayma hakkÄ± kullanamaz. Bu nedenle indirme baÄŸlantÄ±sÄ± gÃ¶nderildikten sonra iade mÃ¼mkÃ¼n deÄŸildir.</p>
    <p><b>TaraflarÄ±n YÃ¼kÃ¼mlÃ¼lÃ¼kleri:</b><br>SatÄ±cÄ±; doÄŸru ve Ã§alÄ±ÅŸÄ±r durumda dijital dosyayÄ± saÄŸlamakla yÃ¼kÃ¼mlÃ¼dÃ¼r.<br>AlÄ±cÄ±; doÄŸru e-posta bilgisi vermekle ve dijital Ã¼rÃ¼nÃ¼n niteliÄŸini kabul etmekle yÃ¼kÃ¼mlÃ¼dÃ¼r.</p>
    <button class="legal-close" onclick="closeLegal('distance')">Kapat</button>
  </div>
</div>

<div class="particles"></div>

<!-- modal -->
<div id="buy-modal" class="modal">
  <div class="panel">
    <div id="modal-message">âœ… ĞĞ¿Ğ»Ğ°Ñ‚Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¸Ğ¼Ğ¸Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°!</div>
    <a id="download-link" class="download" href="#">Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ</a>
    <div style="margin-top:14px">
      <button onclick="closeModal()" style="padding:8px 12px;border-radius:8px;border:none;background:#fff;color:#111;font-weight:700">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button>
    </div>
  </div>
</div>

<script>
// ===== PARTICLES =====
const particlesContainer = document.querySelector('.particles');
for(let i=0;i<40;i++){
  const span = document.createElement('span');
  span.style.top = (Math.random()*100)+'%';
  span.style.left = (Math.random()*100)+'%';
  span.style.width = span.style.height = (2+Math.random()*3)+'px';
  span.style.animationDuration = (3+Math.random()*5)+'s';
  particlesContainer.appendChild(span);
}

// ===== AUDIO PLAYERS =====
document.querySelectorAll('.play-btn').forEach(btn=>{
  btn.addEventListener('click',e=>{
    const card = btn.closest('.card');
    const audio = card.querySelector('audio');
    if(audio.paused){ audio.play(); btn.textContent='â¸ Pause'; }
    else { audio.pause(); btn.textContent='â–¶ Play'; }
  });
});

// ===== BUY MODAL =====
document.querySelectorAll('.buy-btn').forEach(btn=>{
  btn.addEventListener('click',e=>{
    const filename = btn.dataset.filename;
    document.getElementById('download-link').href = '/stream/' + filename;
    document.getElementById('buy-modal').style.display='flex';
  });
});
function closeModal(){ document.getElementById('buy-modal').style.display='none'; }
</script>
<script>
function openLegal(type){ document.getElementById('legal-'+type).style.display='flex'; }
function closeLegal(type){ document.getElementById('legal-'+type).style.display='none'; }
</script>


</body>
</html>
